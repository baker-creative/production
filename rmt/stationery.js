(()=>{var u=document,a=(t,e=u)=>e.querySelectorAll(t),r=(t,e=u)=>e.querySelector(t);var v=window.rmt_stationery_unit_prices,i=r("[data-order-form]"),d=r("[data-order-form-shadow]"),b=r("[data-order-triggers]"),l=a("[data-order-request]"),m=a("input[type=number]"),y=r("[data-order-total]"),p=r("[data-order-total-input]"),c=r('[data-button="submit"]',i),k=r(".form-error"),h=r('[data-el="error_feedback"]'),w=r(".error-message-text"),g=t=>new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD"}).format(t),f=()=>{let t=0;m.forEach(s=>{let n=s.closest("[data-order-request]").dataset.orderRequest,o=v[n];t+=parseFloat(s.value*o)||0});let e=g(t.toFixed(2));y.textContent=e,p.value=e};a("input[type=checkbox]",b).forEach((t,e)=>{t.addEventListener("input",()=>{if(t.checked)return l[e].style.display="block";l[e].style.display="none",setTimeout(()=>{for(let s of a("input[type=number]",l[e]))s.value="";f()},50)})});m.forEach(t=>{let e=t.nextElementSibling,s=r("button",e),n=r("button:last-child",e);t.setAttribute("min","0"),t.removeAttribute("required"),s.addEventListener("click",()=>{if(t.value<1||!t.value)return t.value=0;t.value=parseInt(t.value)-1,t.dispatchEvent(new Event("input"))}),n.addEventListener("click",()=>{t.value||(t.value=0),t.value=parseInt(t.value)+1,t.dispatchEvent(new Event("input"))}),t.addEventListener("input",()=>{t.value=parseFloat(t.value),t.value<0&&(t.value=0),f()})});r('[data-button="submit"]').addEventListener("click",async t=>{var n;let e=parseFloat((n=p.value)==null?void 0:n.replace(/[^.\d]/g,""));if(!e||e===0){t.preventDefault(),h.textContent="Please fix the following errors:",w.textContent="Add at least 1 item to your order.",setTimeout(()=>{a(".form-error")[0].style.display="block",a(".form-error")[0].scrollIntoView({behavior:"smooth"})},10);return}a(".w-form-fail").forEach(o=>o.style.display="none");let s=[...a("input[name]",i)].concat([...a("textarea[name]",i)]);for(let o of s)if(!o.checkValidity())return o.reportValidity();for(let o of s)o.value&&(o.setAttribute("value",o.value),d.appendChild(o));c.scrollIntoView({behavior:"smooth"}),c.textContent=c.dataset.wait,r('input[type="submit"]',d).click()});})();
//# sourceMappingURL=stationery.js.map
