(()=>{var u=document,o=(e,t=u)=>t.querySelectorAll(e),r=(e,t=u)=>t.querySelector(e);var y=window.rmt_stationery_unit_prices,b=r("[data-order-triggers]"),l=o("[data-order-request]"),p=o("input[type=number]"),g=r("[data-order-total]"),v=r("[data-order-total-input]"),d=r(".form-error"),i=r('[data-el="error_feedback"]'),m=r(".error-message-text"),E=e=>new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD"}).format(e),f=()=>{let e=0;p.forEach(a=>{let n=a.closest("[data-order-request]").dataset.orderRequest,s=y[n];e+=parseFloat(a.value*s)||0});let t=E(e.toFixed(2));g.textContent=t,v.value=t};o("input[type=checkbox]",b).forEach((e,t)=>{e.addEventListener("input",()=>{if(e.checked)return l[t].style.display="block";l[t].style.display="none",setTimeout(()=>{for(let a of o("input[type=number]",l[t]))a.value="";f()},50)})});p.forEach(e=>{let t=e.nextElementSibling,a=r("button",t),n=r("button:last-child",t);e.setAttribute("min","0"),e.removeAttribute("required"),a.addEventListener("click",()=>{if(e.value<1||!e.value)return e.value=0;e.value=parseInt(e.value)-1,e.dispatchEvent(new Event("input"))}),n.addEventListener("click",()=>{e.value||(e.value=0),e.value=parseInt(e.value)+1,e.dispatchEvent(new Event("input"))}),e.addEventListener("input",()=>{e.value=parseFloat(e.value),e.value<0&&(e.value=0),f()})});r('[data-button="submit"]').addEventListener("click",e=>{var s;$(':input[value=""]').attr("disabled",!0);let t=parseFloat((s=v.value)==null?void 0:s.replace(/[^.\d]/g,"")),a={},n=o("input[name]",r("[data-order-form]"));for(let c of n)a={...a,[c.name]:c.value};if(console.log(a),!t||t===0)return e.preventDefault(),i.textContent="Please fix the following errors:",m.textContent="Add at least 1 item to your order.",setTimeout(()=>d.style.display="block",10),!1;d.style.display="none",setTimeout(()=>{i.textContent="An error occurred!",m.textContent="Something went wrong when submitting your order. Please try again."},10)});})();
//# sourceMappingURL=stationery.js.map
