(()=>{var J=document,n=(e,l=J)=>l.querySelectorAll(e),s=(e,l=J)=>l.querySelector(e),G=async e=>{try{return[await e,null]}catch(l){return[null,l]}},H=async e=>{async function l(o=0,m){return new Promise(c=>setTimeout(()=>c(m),o))}return await Promise.race([l(0,!1),e.then(()=>!0,()=>!0)])},V=e=>new Promise(l=>setTimeout(l,e));var ee="AIzaSyDoy1acqWxHtDY0J-d_eOCtzVfTmuqEsR8",W,f=[];if("___leeuwin_addresses"in sessionStorage){let e=JSON.parse(sessionStorage.getItem("___leeuwin_addresses"));Array.isArray(e)&&e.length&&(f=[...e])}s("[data-filters-group]").style.cursor="wait";n("[data-filters-group] > *").forEach(e=>e.style.pointerEvents="none");n("[data-tab-menu] > *").forEach(e=>e.style.cursor="wait");s("[data-tab=map]").style.pointerEvents="none";$(async()=>{let e=async()=>{let o=Array.from(n('[fs-cmsfilter-element="list"] > .w-dyn-item')),m=await Promise.all(o.map(async(a,b)=>{var E,P,S,I,M,F,C,R,q,D,z,N,O,j,L,U;let t={},i,p,y,A=(E=s("[data-item]",a))==null?void 0:E.getAttribute("data-item"),h=(P=s("[data-title]",a))==null?void 0:P.textContent.trim(),_=(S=s("[data-location-address] a",a))==null?void 0:S.outerHTML,T=(I=s("[data-location-address] a",a))==null?void 0:I.innerHTML.replaceAll("<br>",", ").replaceAll("/","").trim(),w=s("[data-link=website]",a).getAttribute("href"),v=s("[data-link=phone]",a).getAttribute("href"),Y=s("[data-outlet]",a).getAttribute("data-outlet"),K=()=>{let r=[];return n("[data-product-slug]",a).forEach(k=>r.push(k.getAttribute("data-product-slug"))),`${[...new Set(r)].join(",")}`},x=f.find(r=>r.includes(A));if(x){let r=x.split(/___/g);t={lat:parseFloat(r[1]),lng:parseFloat(r[2])},i=r[3],p=(M=r[4])==null?void 0:M.trim(),y=(F=r[5])==null?void 0:F.trim()}else{if(!T)return;let[r,k]=await G(fetch(`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(T)}&key=${ee}`));if(k||!r.ok)return console.error(`Geocoding failed for ${h}`);try{let{results:u}=await r.json(),Q=(C=u[0])==null?void 0:C.address_components.filter(d=>d.types.includes("postal_code")),X=(R=u[0])==null?void 0:R.address_components.filter(d=>d.types.includes("administrative_area_level_1")),Z=(q=u[0])==null?void 0:q.address_components.filter(d=>d.types.includes("country"));i=(D=Q[0])==null?void 0:D.short_name.trim(),p=(z=X[0])==null?void 0:z.short_name.trim(),y=(N=Z[0])==null?void 0:N.short_name.trim(),t=((j=(O=u[0])==null?void 0:O.geometry)==null?void 0:j.location)||{},f=[`${A}___${(L=t==null?void 0:t.lat)!=null?L:" "}___${(U=t==null?void 0:t.lng)!=null?U:" "}___${i!=null?i:" "}___${p!=null?p:" "}___${y!=null?y:" "}`,...f],sessionStorage.setItem("___leeuwin_addresses",JSON.stringify(f)),await V(1e3)}catch{console.error(`Geocoding failed for ${h+": "+T}`)}}return{name:h,lat:t==null?void 0:t.lat,lng:t==null?void 0:t.lng,address:T,postal:i!=null?i:"",state:y!=="AU"?y:p,location_html:_!=null?_:"",website:w&&w!=="#"?w:"",phone:v&&v!=="#"?v.split("tel:")[1]:"",products:K(),outlet:Y}}));W=JSON.stringify(m.filter(Boolean));let c=()=>setTimeout(()=>$(".locator-message").fadeIn(300),500),g=()=>$(".locator-message").hide(),B=()=>$(".locator-map-container").hide();$("#bh-sl-map-container").storeLocator({fullMapStart:!0,dataType:"json",dataRaw:W,distanceAlert:-1,lengthUnit:"km",disableAlphaMarkers:!0,infowindowTemplateID:"mapiWTemplate",listTemplateID:"mapiWTemplate",storeLimit:-1,mapSettings:{zoom:0,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP},scrollwheel:!1,mapTypeControl:!1,fullscreenControl:!0,streetViewControl:!1,styles:[{featureType:"administrative.country",elementType:"labels.text",stylers:[{lightness:"29"}]},{featureType:"administrative.province",elementType:"labels.text.fill",stylers:[{lightness:"-12"},{color:"#796340"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{lightness:"15"},{saturation:"15"}]},{featureType:"landscape.man_made",elementType:"geometry",stylers:[{visibility:"on"},{color:"#fbf5ed"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{visibility:"on"},{color:"#fbf5ed"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.attraction",elementType:"all",stylers:[{visibility:"on"},{lightness:"30"},{saturation:"-41"},{gamma:"0.84"}]},{featureType:"poi.attraction",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"poi.business",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"poi.business",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.medical",elementType:"geometry",stylers:[{color:"#fbd3da"}]},{featureType:"poi.medical",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#b0e9ac"},{visibility:"on"}]},{featureType:"poi.park",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{hue:"#68ff00"},{lightness:"-24"},{gamma:"1.59"}]},{featureType:"poi.sports_complex",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"poi.sports_complex",elementType:"geometry",stylers:[{saturation:"10"},{color:"#c3eb9a"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{visibility:"on"},{lightness:"30"},{color:"#e7ded6"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"on"},{saturation:"-39"},{lightness:"28"},{gamma:"0.86"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffe523"},{visibility:"on"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{visibility:"on"},{saturation:"0"},{gamma:"1.44"},{color:"#fbc28b"}]},{featureType:"road.highway",elementType:"labels",stylers:[{visibility:"on"},{saturation:"-40"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#fed7a5"}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{visibility:"on"},{gamma:"1.54"},{color:"#fbe38b"}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{visibility:"on"},{gamma:"2.62"},{lightness:"10"}]},{featureType:"road.local",elementType:"geometry.stroke",stylers:[{visibility:"on"},{weight:"0.50"},{gamma:"1.04"}]},{featureType:"transit.station.airport",elementType:"geometry.fill",stylers:[{color:"#dee3fb"}]},{featureType:"water",elementType:"geometry",stylers:[{saturation:"46"},{color:"#a4e1ff"}]}]},taxonomyFilters:{products:"productFilters",state:"stateFilters",outlet:"outletFilters"},exclusiveFiltering:!0,exclusiveTax:["products","state","outlet"],callbackMarkerClick:(a,b,t,i,p)=>{p.panTo(a.getPosition())},callbackNoResults:()=>{B(),c()}}),n("input[type=checkbox]",s("[data-filters-group]")).forEach(a=>{let b=a.getAttribute("data-value");a.addEventListener("change",()=>{let t=s(`input[value="${b}"]`,s(".bh-sl-filters-container"));t.checked=!!t.checked,t.click()})}),n("[fs-cmsfilter-element=clear]").forEach(a=>{a.addEventListener("click",()=>g())})};(()=>new Promise(o=>{let m=setInterval(async()=>{var c,g;await H((g=(c=window.fsAttributes)==null?void 0:c.cmsload)==null?void 0:g.loading)&&(clearInterval(m),o())},100)}))().then(async()=>{await e(),s("[data-filters-group]").style.cursor="",n("[data-filters-group] > *").forEach(o=>o.style.pointerEvents=""),n("[data-tab-menu] > *").forEach(o=>o.style.cursor=""),s("[data-tab=map]").style.pointerEvents=""})});})();
