(()=>{var J=document,n=(e,l=J)=>l.querySelectorAll(e),a=(e,l=J)=>l.querySelector(e),G=async e=>{try{return[await e,null]}catch(l){return[null,l]}},H=async e=>{async function l(g=0,i){return new Promise(p=>setTimeout(()=>p(i),g))}return await Promise.race([l(0,!1),e.then(()=>!0,()=>!0)])},V=e=>new Promise(l=>setTimeout(l,e));var te="AIzaSyDoy1acqWxHtDY0J-d_eOCtzVfTmuqEsR8",B,f=[];window.fsAttributes=window.fsAttributes||[];if("___leeuwin_addresses"in sessionStorage){let e=JSON.parse(sessionStorage.getItem("___leeuwin_addresses"));Array.isArray(e)&&e.length&&(f=[...e])}a("[data-filters-group]").style.cursor="wait";n("[data-filters-group] > *").forEach(e=>e.style.pointerEvents="none");n("[data-tab-menu] > *").forEach(e=>e.style.cursor="wait");a("[data-tab=map]").style.pointerEvents="none";$(async()=>{let e=async()=>{let i=Array.from(n('[fs-cmsfilter-element="list"] > .w-dyn-item')),p=await Promise.all(i.map(async(s,h)=>{var I,P,S,M,C,F,q,R,D,z,N,O,j,L,W,U;let t={},o,y,c,x=(I=a("[data-item]",s))==null?void 0:I.getAttribute("data-item"),_=(P=a("[data-title]",s))==null?void 0:P.textContent.trim(),w=(S=a("[data-location-address] a",s))==null?void 0:S.outerHTML,b=(M=a("[data-location-address] a",s))==null?void 0:M.innerHTML.replaceAll("<br>",", ").replaceAll("/","").trim(),v=a("[data-link=website]",s).getAttribute("href"),k=a("[data-link=phone]",s).getAttribute("href"),K=a("[data-outlet]",s).getAttribute("data-outlet"),Q=()=>{let r=[];return n("[data-product-slug]",s).forEach(A=>r.push(A.getAttribute("data-product-slug"))),`${[...new Set(r)].join(",")}`},E=f.find(r=>r.includes(x));if(E){let r=E.split(/___/g);t={lat:parseFloat(r[1]),lng:parseFloat(r[2])},o=r[3],y=(C=r[4])==null?void 0:C.trim(),c=(F=r[5])==null?void 0:F.trim()}else{if(!b)return;let[r,A]=await G(fetch(`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(b)}&key=${te}`));if(A||!r.ok)return console.error(`Geocoding failed for ${_}`);try{let{results:d}=await r.json(),X=(q=d[0])==null?void 0:q.address_components.filter(u=>u.types.includes("postal_code")),Z=(R=d[0])==null?void 0:R.address_components.filter(u=>u.types.includes("administrative_area_level_1")),ee=(D=d[0])==null?void 0:D.address_components.filter(u=>u.types.includes("country"));o=(z=X[0])==null?void 0:z.short_name.trim(),y=(N=Z[0])==null?void 0:N.short_name.trim(),c=(O=ee[0])==null?void 0:O.short_name.trim(),t=((L=(j=d[0])==null?void 0:j.geometry)==null?void 0:L.location)||{},f=[`${x}___${(W=t==null?void 0:t.lat)!=null?W:" "}___${(U=t==null?void 0:t.lng)!=null?U:" "}___${o!=null?o:" "}___${y!=null?y:" "}___${c!=null?c:" "}`,...f],sessionStorage.setItem("___leeuwin_addresses",JSON.stringify(f)),await V(1e3)}catch{console.error(`Geocoding failed for ${_+": "+b}`)}}return{name:_,lat:t==null?void 0:t.lat,lng:t==null?void 0:t.lng,address:b,postal:o!=null?o:"",state:c!=="AU"?c:y,location_html:w!=null?w:"",website:v&&v!=="#"?v:"",phone:k&&k!=="#"?k.split("tel:")[1]:"",products:Q(),outlet:K}}));B=JSON.stringify(p.filter(Boolean));let m=()=>setTimeout(()=>$(".locator-message").fadeIn(300),500),T=()=>$(".locator-message").hide(),Y=()=>$(".locator-map-container").hide();$("#bh-sl-map-container").storeLocator({fullMapStart:!0,dataType:"json",dataRaw:B,distanceAlert:-1,lengthUnit:"km",disableAlphaMarkers:!0,infowindowTemplateID:"mapiWTemplate",listTemplateID:"mapiWTemplate",storeLimit:-1,mapSettings:{zoom:0,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP},scrollwheel:!1,mapTypeControl:!1,fullscreenControl:!0,streetViewControl:!1,styles:[{featureType:"administrative.country",elementType:"labels.text",stylers:[{lightness:"29"}]},{featureType:"administrative.province",elementType:"labels.text.fill",stylers:[{lightness:"-12"},{color:"#796340"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{lightness:"15"},{saturation:"15"}]},{featureType:"landscape.man_made",elementType:"geometry",stylers:[{visibility:"on"},{color:"#fbf5ed"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{visibility:"on"},{color:"#fbf5ed"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.attraction",elementType:"all",stylers:[{visibility:"on"},{lightness:"30"},{saturation:"-41"},{gamma:"0.84"}]},{featureType:"poi.attraction",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"poi.business",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"poi.business",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.medical",elementType:"geometry",stylers:[{color:"#fbd3da"}]},{featureType:"poi.medical",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#b0e9ac"},{visibility:"on"}]},{featureType:"poi.park",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{hue:"#68ff00"},{lightness:"-24"},{gamma:"1.59"}]},{featureType:"poi.sports_complex",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"poi.sports_complex",elementType:"geometry",stylers:[{saturation:"10"},{color:"#c3eb9a"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{visibility:"on"},{lightness:"30"},{color:"#e7ded6"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"on"},{saturation:"-39"},{lightness:"28"},{gamma:"0.86"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffe523"},{visibility:"on"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{visibility:"on"},{saturation:"0"},{gamma:"1.44"},{color:"#fbc28b"}]},{featureType:"road.highway",elementType:"labels",stylers:[{visibility:"on"},{saturation:"-40"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#fed7a5"}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{visibility:"on"},{gamma:"1.54"},{color:"#fbe38b"}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{visibility:"on"},{gamma:"2.62"},{lightness:"10"}]},{featureType:"road.local",elementType:"geometry.stroke",stylers:[{visibility:"on"},{weight:"0.50"},{gamma:"1.04"}]},{featureType:"transit.station.airport",elementType:"geometry.fill",stylers:[{color:"#dee3fb"}]},{featureType:"water",elementType:"geometry",stylers:[{saturation:"46"},{color:"#a4e1ff"}]}]},taxonomyFilters:{products:"productFilters",state:"stateFilters",outlet:"outletFilters"},exclusiveFiltering:!0,exclusiveTax:["products","state","outlet"],callbackMarkerClick:(s,h,t,o,y)=>{y.panTo(s.getPosition())},callbackNoResults:()=>{Y(),m()}}),n("input[type=checkbox]",a("[data-filters-group]")).forEach(s=>{let h=s.getAttribute("data-value");s.addEventListener("change",()=>{let t=a(`input[value="${h}"]`,a(".bh-sl-filters-container"));t.checked=!!t.checked,t.click()})}),n("[fs-cmsfilter-element=clear]").forEach(s=>{s.addEventListener("click",()=>T())})};(()=>new Promise(i=>{let p=setInterval(async()=>{var m,T;await H((T=(m=window.fsAttributes)==null?void 0:m.cmsload)==null?void 0:T.loading)&&(clearInterval(p),i())},100)}))().then(async()=>{await e(),a("[data-filters-group]").style.cursor="",n("[data-filters-group] > *").forEach(i=>i.style.pointerEvents=""),n("[data-tab-menu] > *").forEach(i=>i.style.cursor=""),a("[data-tab=map]").style.pointerEvents=""});let g=0;window.fsAttributes.push(["cmsfilter",i=>{let[p]=i;p.listInstance.on("renderitems",m=>{g>0&&m.length>0&&(window.Webflow.destroy(),window.Webflow.ready(),window.Webflow.require("ix2").init()),g++})}])});})();
