(()=>{var J=document,i=(e,l=J)=>l.querySelectorAll(e),r=(e,l=J)=>l.querySelector(e),G=async e=>{try{return[await e,null]}catch(l){return[null,l]}},H=async e=>{async function l(T=0,o){return new Promise(u=>setTimeout(()=>u(o),T))}return await Promise.race([l(0,!1),e.then(()=>!0,()=>!0)])},V=e=>new Promise(l=>setTimeout(l,e));var ae="AIzaSyDoy1acqWxHtDY0J-d_eOCtzVfTmuqEsR8",B,g=[];window.fsAttributes=window.fsAttributes||[];if("___leeuwin_addresses"in sessionStorage){let e=JSON.parse(sessionStorage.getItem("___leeuwin_addresses"));Array.isArray(e)&&e.length&&(g=[...e])}r("[data-filters-group]").style.cursor="wait";i("[data-filters-group] > *").forEach(e=>e.style.pointerEvents="none");i("[data-tab-menu] > *").forEach(e=>e.style.cursor="wait");r("[data-tab=map]").style.pointerEvents="none";$(async()=>{let e=async()=>{let o=Array.from(i('[fs-cmsfilter-element="list"] > .w-dyn-item')),d=(await Promise.all(o.map(async(s,w)=>{var S,I,P,M,C,F,q,R,j,D,O,z,N,L,W,U;let t={},n,y,c,x=(S=r("[data-item]",s))==null?void 0:S.getAttribute("data-item"),h=(I=r("[data-title]",s))==null?void 0:I.textContent.trim(),v=(P=r("[data-location-address] a",s))==null?void 0:P.outerHTML,_=(M=r("[data-location-address] a",s))==null?void 0:M.innerHTML.replaceAll("<br>",", ").replaceAll("/","").trim(),k=r("[data-link=website]",s).getAttribute("href"),A=r("[data-link=phone]",s).getAttribute("href"),Q=r("[data-outlet]",s).getAttribute("data-outlet"),X=()=>{let a=[];return i("[data-outlet-type]",s).forEach(m=>{let p=m.getAttribute("data-outlet-type").trim();p&&a.push(p)}),`${[...new Set(a)].join(",")}`},Z=()=>{let a=[];return i("[data-product-slug]",s).forEach(m=>a.push(m.getAttribute("data-product-slug"))),`${[...new Set(a)].join(",")}`},E=g.find(a=>a.includes(x));if(E){let a=E.split(/___/g);t={lat:parseFloat(a[1]),lng:parseFloat(a[2])},n=a[3],y=(C=a[4])==null?void 0:C.trim(),c=(F=a[5])==null?void 0:F.trim()}else{if(!_)return console.log(`${h} address not available`);let[a,m]=await G(fetch(`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(_)}&key=${ae}`));if(m||!a.ok)return console.error(`Geocoding failed for ${h}`);try{let{results:p}=await a.json(),ee=(q=p[0])==null?void 0:q.address_components.filter(f=>f.types.includes("postal_code")),te=(R=p[0])==null?void 0:R.address_components.filter(f=>f.types.includes("administrative_area_level_1")),se=(j=p[0])==null?void 0:j.address_components.filter(f=>f.types.includes("country"));n=(D=ee[0])==null?void 0:D.short_name.trim(),y=(O=te[0])==null?void 0:O.short_name.trim(),c=(z=se[0])==null?void 0:z.short_name.trim(),t=((L=(N=p[0])==null?void 0:N.geometry)==null?void 0:L.location)||{},g=[`${x}___${(W=t==null?void 0:t.lat)!=null?W:" "}___${(U=t==null?void 0:t.lng)!=null?U:" "}___${n!=null?n:" "}___${y!=null?y:" "}___${c!=null?c:" "}`,...g],sessionStorage.setItem("___leeuwin_addresses",JSON.stringify(g)),await V(1e3)}catch{console.error(`Geocoding failed for ${h+": "+_}`)}}return{name:h,lat:t==null?void 0:t.lat,lng:t==null?void 0:t.lng,address:_,postal:n!=null?n:"",state:c!=="AU"?c:y,location_html:v!=null?v:"",website:k&&k!=="#"?k:"",phone:A&&A!=="#"?A.split("tel:")[1]:"",outlet:Q,outletTypes:X(),products:Z()}}))).filter(Boolean);B=JSON.stringify(d);let b=()=>setTimeout(()=>$(".locator-message").fadeIn(300),500),Y=()=>$(".locator-message").hide(),K=()=>$(".locator-map-container").hide();$("#bh-sl-map-container").storeLocator({fullMapStart:!0,dataType:"json",dataRaw:B,distanceAlert:-1,lengthUnit:"km",disableAlphaMarkers:!0,infowindowTemplateID:"mapiWTemplate",listTemplateID:"mapiWTemplate",storeLimit:-1,mapSettings:{zoom:0,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP},scrollwheel:!1,mapTypeControl:!1,fullscreenControl:!0,streetViewControl:!1,styles:[{featureType:"administrative.country",elementType:"labels.text",stylers:[{lightness:"29"}]},{featureType:"administrative.province",elementType:"labels.text.fill",stylers:[{lightness:"-12"},{color:"#796340"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{lightness:"15"},{saturation:"15"}]},{featureType:"landscape.man_made",elementType:"geometry",stylers:[{visibility:"on"},{color:"#fbf5ed"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{visibility:"on"},{color:"#fbf5ed"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.attraction",elementType:"all",stylers:[{visibility:"on"},{lightness:"30"},{saturation:"-41"},{gamma:"0.84"}]},{featureType:"poi.attraction",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"poi.business",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"poi.business",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.medical",elementType:"geometry",stylers:[{color:"#fbd3da"}]},{featureType:"poi.medical",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#b0e9ac"},{visibility:"on"}]},{featureType:"poi.park",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{hue:"#68ff00"},{lightness:"-24"},{gamma:"1.59"}]},{featureType:"poi.sports_complex",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"poi.sports_complex",elementType:"geometry",stylers:[{saturation:"10"},{color:"#c3eb9a"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{visibility:"on"},{lightness:"30"},{color:"#e7ded6"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"on"},{saturation:"-39"},{lightness:"28"},{gamma:"0.86"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffe523"},{visibility:"on"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{visibility:"on"},{saturation:"0"},{gamma:"1.44"},{color:"#fbc28b"}]},{featureType:"road.highway",elementType:"labels",stylers:[{visibility:"on"},{saturation:"-40"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#fed7a5"}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{visibility:"on"},{gamma:"1.54"},{color:"#fbe38b"}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{visibility:"on"},{gamma:"2.62"},{lightness:"10"}]},{featureType:"road.local",elementType:"geometry.stroke",stylers:[{visibility:"on"},{weight:"0.50"},{gamma:"1.04"}]},{featureType:"transit.station.airport",elementType:"geometry.fill",stylers:[{color:"#dee3fb"}]},{featureType:"water",elementType:"geometry",stylers:[{saturation:"46"},{color:"#a4e1ff"}]}]},taxonomyFilters:{products:"productFilters",state:"stateFilters",outletTypes:"outletTypeFilters"},exclusiveFiltering:!0,exclusiveTax:["products","state","outletTypes"],callbackMarkerClick:(s,w,t,n,y)=>{y.panTo(s.getPosition())},callbackNoResults:()=>{K(),b()}}),i("input[type=checkbox]",r("[data-filters-group]")).forEach(s=>{let w=s.getAttribute("data-value");s.addEventListener("change",()=>{let t=r(`input[value="${w}"]`,r(".bh-sl-filters-container"));t.checked=!!t.checked,t.click()})}),i("[fs-cmsfilter-element=clear]").forEach(s=>{s.addEventListener("click",()=>Y())})};(()=>new Promise(o=>{let u=setInterval(async()=>{var d,b;await H((b=(d=window.fsAttributes)==null?void 0:d.cmsload)==null?void 0:b.loading)&&(clearInterval(u),o())},100)}))().then(async()=>{await e(),r("[data-filters-group]").style.cursor="",i("[data-filters-group] > *").forEach(o=>o.style.pointerEvents=""),i("[data-tab-menu] > *").forEach(o=>o.style.cursor=""),r("[data-tab=map]").style.pointerEvents=""});let T=0;window.fsAttributes.push(["cmsfilter",o=>{let[u]=o;u.listInstance.on("renderitems",d=>{T>0&&d.length>0&&(window.Webflow.destroy(),window.Webflow.ready(),window.Webflow.require("ix2").init()),T++})}])});})();
//# sourceMappingURL=map.min.js.map
