(()=>{(function(n,A,m,B){"use strict";var h="storeLocator";if(typeof n.fn[h]!="undefined"||typeof google=="undefined")return;var O,xt,z,J,j,x,st,_,N,p,d,D,w,U,T,ft,dt,it,L,Z,M,K,F=[],o=[],nt=[],S=[],u={},X={},at={},g={},pt={ajaxData:null,altDistanceNoResult:!1,autoComplete:!1,autoCompleteDisableListener:!1,autoCompleteOptions:{},autoGeocode:!1,bounceMarker:!0,catMarkers:null,dataLocation:"data/locations.json",dataRaw:null,dataType:"json",debug:!1,defaultLat:null,defaultLng:null,defaultLoc:!1,disableAlphaMarkers:!1,distanceAlert:60,dragSearch:!1,exclusiveFiltering:!1,exclusiveTax:null,featuredDistance:null,featuredLocations:!1,fullMapStart:!1,fullMapStartBlank:!1,fullMapStartListLimit:!1,infoBubble:null,inlineDirections:!1,lengthUnit:"m",listColor1:"#ffffff",listColor2:"#eeeeee",loading:!1,locationsPerPage:10,mapSettings:{mapTypeId:google.maps.MapTypeId.ROADMAP,zoom:12},markerCluster:null,markerImg:null,markerDim:null,maxDistance:!1,modal:!1,nameAttribute:"name",nameSearch:!1,noForm:!1,openNearest:!1,originMarker:!1,originMarkerDim:null,originMarkerImg:null,pagination:!1,querystringParams:!1,selectedMarkerImg:null,selectedMarkerImgDim:null,sessionStorage:!1,slideMap:!0,sortBy:null,storeLimit:26,taxonomyFilters:null,visibleMarkersList:!1,xmlElement:"marker",addressID:"bh-sl-address",closeIcon:"bh-sl-close-icon",formContainer:"bh-sl-form-container",formID:"bh-sl-user-location",geocodeID:null,lengthSwapID:"bh-sl-length-swap",loadingContainer:"bh-sl-loading",locationList:"bh-sl-loc-list",mapID:"bh-sl-map",maxDistanceID:"bh-sl-maxdistance",modalContent:"bh-sl-modal-content",modalWindow:"bh-sl-modal-window",orderID:"bh-sl-order",overlay:"bh-sl-overlay",regionID:"bh-sl-region",searchID:"bh-sl-search",sortID:"bh-sl-sort",taxonomyFiltersContainer:"bh-sl-filters-container",infowindowTemplatePath:"assets/js/plugins/storeLocator/templates/infowindow-description.html",listTemplatePath:"assets/js/plugins/storeLocator/templates/location-list-description.html",KMLinfowindowTemplatePath:"assets/js/plugins/storeLocator/templates/kml-infowindow-description.html",KMLlistTemplatePath:"assets/js/plugins/storeLocator/templates/kml-location-list-description.html",listTemplateID:null,infowindowTemplateID:null,callbackAutoGeoSuccess:null,callbackBeforeSend:null,callbackCloseDirections:null,callbackCreateMarker:null,callbackDirectionsRequest:null,callbackFilters:null,callbackFormVals:null,callbackGeocodeRestrictions:null,callbackJsonp:null,callbackListClick:null,callbackMapSet:null,callbackMarkerClick:null,callbackModalClose:null,callbackModalOpen:null,callbackModalReady:null,callbackNearestLoc:null,callbackNoResults:null,callbackNotify:null,callbackOrder:null,callbackPageChange:null,callbackRegion:null,callbackSorting:null,callbackSuccess:null,addressErrorAlert:"Unable to find address",autoGeocodeErrorAlert:"Automatic location detection failed. Please fill in your address or zip code.",distanceErrorAlert:"Unfortunately, our closest location is more than ",kilometerLang:"kilometer",kilometersLang:"kilometers",mileLang:"mile",milesLang:"miles",noResultsTitle:"No results",noResultsDesc:"No locations were found with the given criteria. Please modify your selections or input.",nextPage:"Next &raquo;",prevPage:"&laquo; Prev"};function rt(t,s){O=n(t),this.element=t,this.settings=n.extend({},pt,s),this._defaults=pt,this._name=h,this.init()}n.extend(rt.prototype,{init:function(){var t=this;if(this.writeDebug("init"),this.settings.lengthUnit==="km"?at.EarthRadius=6367:at.EarthRadius=3956,this.settings.dataType==="kml"?j="xml":j=this.settings.dataType,this.settings.inlineDirections===!0&&n("."+this.settings.locationList).prepend('<div class="bh-sl-directions-panel"></div>'),_=this.settings.mapSettings.zoom,Handlebars.registerHelper("niceURL",function(a){if(a)return a.replace("https://","").replace("http://","")}),this.settings.taxonomyFilters!==null&&this.taxonomyFiltering(),this.sorting(),this.order(),this.settings.modal===!0&&(this.settings.taxonomyFilters!==null&&n("."+this.settings.taxonomyFiltersContainer).clone(!0,!0).prependTo(O),O.wrap('<div class="'+this.settings.overlay+'"><div class="'+this.settings.modalWindow+'"><div class="'+this.settings.modalContent+'">'),n("."+this.settings.modalWindow).prepend('<div class="'+this.settings.closeIcon+'"></div>'),n("."+this.settings.overlay).hide()),this.settings.autoComplete===!0){var s=m.getElementById(this.settings.addressID),i=new google.maps.places.Autocomplete(s,this.settings.autoCompleteOptions);this.settings.autoComplete===!0&&this.settings.autoCompleteDisableListener!==!0&&i.addListener("place_changed",function(a){t.processForm(a)})}this._loadTemplates()},destroy:function(){this.writeDebug("destroy"),this.reset();var t=n("#"+this.settings.mapID);if(S.length)for(var s=0;s<=S.length;s++)google.maps.event.removeListener(S[s]);n("."+this.settings.locationList+" ul").empty(),t.hasClass("bh-sl-map-open")&&t.empty().removeClass("bh-sl-map-open"),this.settings.modal===!0&&n(". "+this.settings.overlay).remove(),t.attr("style",""),O.hide(),n.removeData(O.get(0)),n(m).off(h),O.unbind()},reset:function(){if(this.writeDebug("reset"),o=[],F=[],nt=[],S=[],L=!1,n(m).off("click."+h,"."+this.settings.locationList+" li"),n("."+this.settings.locationList+" .bh-sl-close-directions-container").length&&n(".bh-sl-close-directions-container").remove(),this.settings.inlineDirections===!0){var t=n("."+this.settings.locationList+" .adp");t.length>0&&(t.remove(),n("."+this.settings.locationList+" ul").fadeIn()),n(m).off("click","."+this.settings.locationList+" li .loc-directions a")}this.settings.pagination===!0&&n(m).off("click."+h,".bh-sl-pagination li")},formFiltersReset:function(){if(this.writeDebug("formFiltersReset"),this.settings.taxonomyFilters!==null){var t=n("."+this.settings.taxonomyFiltersContainer+" input"),s=n("."+this.settings.taxonomyFiltersContainer+" select");typeof t=="object"&&(t.each(function(){(n(this).is('input[type="checkbox"]')||n(this).is('input[type="radio"]'))&&n(this).prop("checked",!1)}),s.each(function(){n(this).prop("selectedIndex",0)}))}},mapReload:function(){this.writeDebug("mapReload"),this.reset(),Z=!0,this.settings.taxonomyFilters!==null&&(this.formFiltersReset(),this.resetDisabledFilterVals(),this.taxonomyFiltersInit()),D&&w?(this.settings.mapSettings.zoom=_,this.processForm()):this.mapping(g)},notify:function(t){this.writeDebug("notify",t),this.settings.callbackNotify?this.settings.callbackNotify.call(this,t):alert(t)},geoCodeCalcToRadian:function(t){return this.writeDebug("geoCodeCalcToRadian",t),t*(Math.PI/180)},geoCodeCalcDiffRadian:function(t,s){return this.writeDebug("geoCodeCalcDiffRadian",arguments),this.geoCodeCalcToRadian(s)-this.geoCodeCalcToRadian(t)},geoCodeCalcCalcDistance:function(t,s,i,a,e){return this.writeDebug("geoCodeCalcCalcDistance",arguments),e*2*Math.asin(Math.min(1,Math.sqrt(Math.pow(Math.sin(this.geoCodeCalcDiffRadian(t,i)/2),2)+Math.cos(this.geoCodeCalcToRadian(t))*Math.cos(this.geoCodeCalcToRadian(i))*Math.pow(Math.sin(this.geoCodeCalcDiffRadian(s,a)/2),2))))},inRange:function(t,s,i){return this.writeDebug("inRange",arguments),s=Math.abs(s),isFinite(s)&&s>=t&&s<=i},coordinatesInRange:function(t,s){return this.writeDebug("coordinatesInRange",arguments),this.inRange(-90,t,90)&&this.inRange(-180,s,180)},getQueryString:function(t){if(this.writeDebug("getQueryString",t),t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var s=new RegExp("[\\?&]"+t+"=([^&#]*)"),i=s.exec(location.search);return i===null?"":decodeURIComponent(i[1].replace(/\+/g," "))}},getMap:function(){return this.map},_loadTemplates:function(){this.writeDebug("_loadTemplates");var t,s=this,i='<div class="bh-sl-error">Error: Could not load plugin templates. Check the paths and ensure they have been uploaded. Paths will be wrong if you do not run this from a web server.</div>';this.settings.dataType==="kml"&&this.settings.listTemplateID===null&&this.settings.infowindowTemplateID===null?n.when(n.get(this.settings.KMLinfowindowTemplatePath,function(a){t=a,J=Handlebars.compile(t)}),n.get(this.settings.KMLlistTemplatePath,function(a){t=a,z=Handlebars.compile(t)})).then(function(){s.locator()},function(){throw n("."+s.settings.formContainer).append(i),new Error("Could not load storeLocator plugin templates")}):this.settings.listTemplateID!==null&&this.settings.infowindowTemplateID!==null?(J=Handlebars.compile(n("#"+this.settings.infowindowTemplateID).html()),z=Handlebars.compile(n("#"+this.settings.listTemplateID).html()),s.locator()):n.when(n.get(this.settings.infowindowTemplatePath,function(a){t=a,J=Handlebars.compile(t)}),n.get(this.settings.listTemplatePath,function(a){t=a,z=Handlebars.compile(t)})).then(function(){s.locator()},function(){throw n("."+s.settings.formContainer).append(i),new Error("Could not load storeLocator plugin templates")})},locator:function(){this.writeDebug("locator"),this.settings.slideMap===!0&&O.hide(),this._start(),this._formEventHandler()},_formEventHandler:function(){this.writeDebug("_formEventHandler");var t=this;this.settings.noForm===!0?(n(m).on("click."+h,"."+this.settings.formContainer+" button",function(s){t.processForm(s)}),n(m).on("keydown."+h,function(s){s.keyCode===13&&n("#"+t.settings.addressID).is(":focus")&&t.processForm(s)})):n(m).on("submit."+h,"#"+this.settings.formID,function(s){t.processForm(s)}),n(".bh-sl-reset").length&&n("#"+this.settings.mapID).length&&n(m).on("click."+h,".bh-sl-reset",function(){t.mapReload()}),n("#"+this.settings.addressID).on("change."+h,function(){K=B,n.trim(n("#"+t.settings.addressID).val())===""&&(typeof p=="undefined"||p==="")&&t.settings.taxonomyFilters!==null&&t.settings.exclusiveFiltering===!1&&(D=B,w=B,x=B,g={},t.resetDisabledFilterVals(),t.taxonomyFiltersInit(),t.mapping(null))})},_getData:function(t,s,i,a,e){this.writeDebug("_getData",arguments);var r=this,l="",c="",f="";if(typeof a!="undefined"&&typeof a.geometry.bounds!="undefined"&&(f=a.formatted_address,l=JSON.stringify(a.geometry.bounds.getNorthEast()),c=JSON.stringify(a.geometry.bounds.getSouthWest())),this.settings.callbackBeforeSend&&this.settings.callbackBeforeSend.call(this,t,s,i,f,l,c,e),r.settings.dataRaw!==null){if(j==="xml")return n.parseXML(r.settings.dataRaw);if(j==="json")return Array.isArray&&Array.isArray(r.settings.dataRaw)?r.settings.dataRaw:typeof r.settings.dataRaw=="string"?JSON.parse(r.settings.dataRaw):[]}else{var v=n.Deferred();this.settings.loading===!0&&n("."+this.settings.formContainer).append('<div class="'+this.settings.loadingContainer+'"></div>');var b={origLat:t,origLng:s,origAddress:i,formattedAddress:f,boundsNorthEast:l,boundsSouthWest:c};return this.settings.ajaxData!==null&&typeof this.settings.ajaxData=="object"&&n.extend(b,this.settings.ajaxData),n.ajax({type:"GET",url:this.settings.dataLocation+(this.settings.dataType==="jsonp"?(this.settings.dataLocation.match(/\?/)?"&":"?")+"callback=?":""),data:b,dataType:j,jsonpCallback:this.settings.dataType==="jsonp"?this.settings.callbackJsonp:null}).done(function(G){v.resolve(G),r.settings.loading===!0&&n("."+r.settings.formContainer+" ."+r.settings.loadingContainer).remove()}).fail(v.reject),v.promise()}},_start:function(){this.writeDebug("_start");var t=this,s=this.settings.autoGeocode,i;if(t.settings.fullMapStartBlank!==!1){var a=n("#"+t.settings.mapID);a.addClass("bh-sl-map-open");var e=t.settings.mapSettings;e.zoom=t.settings.fullMapStartBlank,i=new google.maps.LatLng(this.settings.defaultLat,this.settings.defaultLng),e.center=i,t.map=new google.maps.Map(m.getElementById(t.settings.mapID),e),A.addEventListener("resize",function(){var r=t.map.getCenter();google.maps.event.trigger(t.map,"resize"),t.map.setCenter(r)}),t.settings.fullMapStartBlank=!1,e.zoom=_}else this.settings.defaultLoc===!0&&this.defaultLocation(),n.trim(n("#"+this.settings.addressID).val())!==""?(t.writeDebug("Using Address Field"),t.processForm(null),s=!1):this.settings.fullMapStart===!0&&this.settings.defaultLoc===!1&&(this.settings.querystringParams===!0&&this.getQueryString(this.settings.addressID)||this.settings.querystringParams===!0&&this.getQueryString(this.settings.searchID)||this.settings.querystringParams===!0&&this.getQueryString(this.settings.maxDistanceID)?(t.writeDebug("Using Query String"),this.processForm(null),s=!1):this.mapping(null));this.settings.autoGeocode===!0&&s===!0&&(t.writeDebug("Auto Geo"),t.htmlGeocode()),this.settings.autoGeocode!==null&&(t.writeDebug("Button Geo"),n(m).on("click."+h,"#"+this.settings.geocodeID,function(){t.htmlGeocode()}))},htmlGeocode:function(){this.writeDebug("htmlGeocode",arguments);var t=this;if(t.settings.sessionStorage===!0&&A.sessionStorage&&A.sessionStorage.getItem("myGeo"))return t.writeDebug("Using Session Saved Values for GEO"),t.autoGeocodeQuery(JSON.parse(A.sessionStorage.getItem("myGeo"))),!1;navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(s){t.writeDebug("Current Position Result");var i={coords:{latitude:s.coords.latitude,longitude:s.coords.longitude,accuracy:s.coords.accuracy}};t.settings.sessionStorage===!0&&A.sessionStorage&&A.sessionStorage.setItem("myGeo",JSON.stringify(i)),t.settings.callbackAutoGeoSuccess&&t.settings.callbackAutoGeoSuccess.call(this,i),t.autoGeocodeQuery(i)},function(s){t._autoGeocodeError(s)})},googleGeocode:function(t){t.writeDebug("googleGeocode",arguments);var s=new google.maps.Geocoder;this.geocode=function(i,a){s.geocode(i,function(e,r){if(r===google.maps.GeocoderStatus.OK){var l={};l.latitude=e[0].geometry.location.lat(),l.longitude=e[0].geometry.location.lng(),l.geocodeResult=e[0],a(l)}else throw a(null),new Error("Geocode was not successful for the following reason: "+r)})}},reverseGoogleGeocode:function(t){t.writeDebug("reverseGoogleGeocode",arguments);var s=new google.maps.Geocoder;this.geocode=function(i,a){s.geocode(i,function(e,r){if(r===google.maps.GeocoderStatus.OK){if(e[0]){var l={};l.address=e[0].formatted_address,l.fullResult=e[0],a(l)}}else throw a(null),new Error("Reverse geocode was not successful for the following reason: "+r)})}},roundNumber:function(t,s){return this.writeDebug("roundNumber",arguments),Math.round(t*Math.pow(10,s))/Math.pow(10,s)},isEmptyObject:function(t){this.writeDebug("isEmptyObject",arguments);for(var s in t)if(t.hasOwnProperty(s))return!1;return!0},hasEmptyObjectVals:function(t){this.writeDebug("hasEmptyObjectVals",arguments);var s=!0;for(var i in t)t.hasOwnProperty(i)&&t[i]!==""&&t[i].length!==0&&(s=!1);return s},hasSingleGroupFilterVal:function(t,s){this.writeDebug("hasSingleGroupFilterVal",arguments);var i=Object.assign({},t);return!this.hasEmptyObjectVals(i[s])},modalClose:function(){this.writeDebug("modalClose"),this.settings.callbackModalClose&&this.settings.callbackModalClose.call(this),u={},n("."+this.settings.overlay+" select").prop("selectedIndex",0),n("."+this.settings.overlay+" input").prop("checked",!1),n("."+this.settings.overlay).hide()},_createLocationVariables:function(t){this.writeDebug("_createLocationVariables",arguments);var s;X={};for(var i in o[t])o[t].hasOwnProperty(i)&&(s=o[t][i],(i==="distance"||i==="altdistance")&&(s=this.roundNumber(s,2)),X[i]=s)},sortAlpha:function(t){this.writeDebug("sortAlpha",arguments);var s=this.settings.sortBy.hasOwnProperty("prop")&&typeof this.settings.sortBy.prop!="undefined"?this.settings.sortBy.prop:"name";this.settings.sortBy.hasOwnProperty("order")&&this.settings.sortBy.order.toString()==="desc"?t.sort(function(i,a){return a[s].toLowerCase().localeCompare(i[s].toLowerCase())}):t.sort(function(i,a){return i[s].toLowerCase().localeCompare(a[s].toLowerCase())})},sortDate:function(t){this.writeDebug("sortDate",arguments);var s=this.settings.sortBy.hasOwnProperty("prop")&&typeof this.settings.sortBy.prop!="undefined"?this.settings.sortBy.prop:"date";this.settings.sortBy.hasOwnProperty("order")&&this.settings.sortBy.order.toString()==="desc"?t.sort(function(i,a){return new Date(a[s]).getTime()-new Date(i[s]).getTime()}):t.sort(function(i,a){return new Date(i[s]).getTime()-new Date(a[s]).getTime()})},sortNumerically:function(t,s){this.writeDebug("sortNumerically",arguments);var i=this.settings.sortBy!==null&&this.settings.sortBy.hasOwnProperty("prop")&&typeof this.settings.sortBy.prop!="undefined"?this.settings.sortBy.prop:"distance";typeof s!="undefined"&&s===!0&&(i="distance"),this.settings.sortBy!==null&&this.settings.sortBy.hasOwnProperty("order")&&this.settings.sortBy.order.toString()==="desc"?t.sort(function(a,e){return e[i]<a[i]?-1:e[i]>a[i]?1:0}):t.sort(function(a,e){return a[i]<e[i]?-1:a[i]>e[i]?1:0})},sortCustom:function(t){this.writeDebug("sortCustom",arguments),this.settings.sortBy.hasOwnProperty("method")&&this.settings.sortBy.method.toString()==="alpha"?this.sortAlpha(t):this.settings.sortBy.hasOwnProperty("method")&&this.settings.sortBy.method.toString()==="date"?this.sortDate(t):this.sortNumerically(t)},filterMatching:function(t,s,i){this.writeDebug("inclusiveFilter",arguments),i=typeof i!="undefined"?i:!0;var a;return typeof s=="undefined"?!1:(i===!0?a=t.join(""):a=t.join("|"),!!new RegExp(a,"i").test(s.replace(/([.*+?^=!:${}()|\[\]\/\\]|&\s+)/g,"")))},filterData:function(t,s){this.writeDebug("filterData",arguments);var i=!0;for(var a in s)if(s.hasOwnProperty(a)){for(var e=[],r=0;r<s[a].length;r++)this.settings.exclusiveFiltering===!0||this.settings.exclusiveTax!==null&&Array.isArray(this.settings.exclusiveTax)&&this.settings.exclusiveTax.indexOf(a)!==-1?e[r]=this.filterMatching(s[a],t[a],!1):e[r]=this.filterMatching(s[a],t[a]);if(typeof M!="undefined"&&M.indexOf(a)!==-1&&e.indexOf(!0)!==-1)return!0;e.indexOf(!0)===-1&&(i=!1)}return i},_paginationOutput:function(t,s){this.writeDebug("_paginationOutput",arguments),t=parseFloat(t);var i="",a=t+1,e=t-1;t>0&&(i+='<li class="bh-sl-next-prev" data-page="'+e+'">'+this.settings.prevPage+"</li>");for(var r=0;r<Math.ceil(s);r++){var l=r+1;r===t?i+='<li class="bh-sl-current" data-page="'+r+'">'+l+"</li>":i+='<li data-page="'+r+'">'+l+"</li>"}return a<s&&(i+='<li class="bh-sl-next-prev" data-page="'+a+'">'+this.settings.nextPage+"</li>"),i},paginationSetup:function(t){this.writeDebug("paginationSetup",arguments);var s="",i,a=n(".bh-sl-pagination-container .bh-sl-pagination");this.settings.storeLimit===-1||o.length<this.settings.storeLimit?i=o.length/this.settings.locationsPerPage:i=this.settings.storeLimit/this.settings.locationsPerPage,typeof t=="undefined"&&(t=0),a.length===0?s=this._paginationOutput(t,i):(a.empty(),s=this._paginationOutput(t,i)),a.append(s)},markerImage:function(t,s,i){this.writeDebug("markerImage",arguments);var a;return typeof s!="undefined"&&typeof i!="undefined"?a={url:t,size:new google.maps.Size(s,i),scaledSize:new google.maps.Size(s,i)}:a={url:t,size:new google.maps.Size(32,32),scaledSize:new google.maps.Size(32,32)},a},createMarker:function(t,s,i,a,e,r){this.writeDebug("createMarker",arguments);var l,c,f,v=[];if(this.settings.catMarkers!==null&&typeof r!="undefined")if(r.indexOf(",")!==-1){v=r.split(",");for(var b=0;b<v.length;b++)v[b]in this.settings.catMarkers&&(c=this.markerImage(this.settings.catMarkers[v[b]][0],parseInt(this.settings.catMarkers[v[b]][1]),parseInt(this.settings.catMarkers[v[b]][2])))}else r in this.settings.catMarkers&&(c=this.markerImage(this.settings.catMarkers[r][0],parseInt(this.settings.catMarkers[r][1]),parseInt(this.settings.catMarkers[r][2])));return this.settings.markerImg!==null&&(this.settings.markerDim===null?c=this.markerImage(this.settings.markerImg):c=this.markerImage(this.settings.markerImg,this.settings.markerDim.width,this.settings.markerDim.height)),this.settings.callbackCreateMarker?l=this.settings.callbackCreateMarker.call(this,e,t,a,r):this.settings.disableAlphaMarkers===!0||this.settings.storeLimit===-1||this.settings.storeLimit>26||this.settings.catMarkers!==null||this.settings.markerImg!==null||this.settings.fullMapStart===!0&&L===!0&&(isNaN(this.settings.fullMapStartListLimit)||this.settings.fullMapStartListLimit>26||this.settings.fullMapStartListLimit===-1)?l=new google.maps.Marker({draggable:!1,icon:c,map:e,optimized:!1,position:t,title:s}):l=new google.maps.Marker({draggable:!1,label:a,map:e,optimized:!1,position:t,title:s}),l},_defineLocationData:function(t,s,i){this.writeDebug("_defineLocationData",arguments);var a="";this._createLocationVariables(t.get("id"));var e,r;X.distance<=1?this.settings.lengthUnit==="km"?(r=this.settings.kilometerLang,e=this.settings.mileLang):(r=this.settings.mileLang,e=this.settings.kilometerLang):this.settings.lengthUnit==="km"?(r=this.settings.kilometersLang,e=this.settings.milesLang):(r=this.settings.milesLang,e=this.settings.kilometersLang);var l=t.get("id");return this.settings.disableAlphaMarkers===!0||this.settings.storeLimit===-1||this.settings.storeLimit>26||this.settings.fullMapStart===!0&&L===!0&&(isNaN(this.settings.fullMapStartListLimit)||this.settings.fullMapStartListLimit>26||this.settings.fullMapStartListLimit===-1)?a=l+1:i>0?a=String.fromCharCode("A".charCodeAt(0)+(s+l)):a=String.fromCharCode("A".charCodeAt(0)+l),{location:[n.extend(X,{markerid:l,marker:a,altlength:e,length:r,origin:x})]}},listSetup:function(t,s,i){this.writeDebug("listSetup",arguments);var a=this._defineLocationData(t,s,i),e=z(a);n("."+this.settings.locationList+" > ul").append(e)},changeSelectedMarker:function(t){var s;typeof it!="undefined"&&it.setIcon(dt),this.settings.selectedMarkerImgDim===null?s=this.markerImage(this.settings.selectedMarkerImg):s=this.markerImage(this.settings.selectedMarkerImg,this.settings.selectedMarkerImgDim.width,this.settings.selectedMarkerImgDim.height),dt=t.icon,t.setIcon(s),it=t},createInfowindow:function(t,s,i,a,e){this.writeDebug("createInfowindow",arguments);var r=this,l=this._defineLocationData(t,a,e),c=J(l);s==="left"?(i.setContent(c),i.open(t.get("map"),t)):google.maps.event.addListener(t,"click",function(){i.setContent(c),i.open(t.get("map"),t);var f=t.get("id"),v=n("."+r.settings.locationList+" li[data-markerid="+f+"]");if(v.length>0){r.settings.callbackMarkerClick&&r.settings.callbackMarkerClick.call(this,t,f,v,o[f],r.map),n("."+r.settings.locationList+" li").removeClass("list-focus"),v.addClass("list-focus");var b=n("."+r.settings.locationList);b.animate({scrollTop:v.offset().top-b.offset().top+b.scrollTop()})}r.settings.selectedMarkerImg!==null&&r.changeSelectedMarker(t)})},autoGeocodeQuery:function(t){this.writeDebug("autoGeocodeQuery",arguments);var s=this,i=null,a=n("#"+this.settings.maxDistanceID),e;this.settings.querystringParams===!0?this.getQueryString(this.settings.maxDistanceID)?(i=this.getQueryString(this.settings.maxDistanceID),a.val()!==""&&(i=a.val())):this.settings.maxDistance===!0&&(i=a.val()||""):this.settings.maxDistance===!0&&(i=a.val()||"");var r=new this.reverseGoogleGeocode(this),l=new google.maps.LatLng(t.coords.latitude,t.coords.longitude);r.geocode({latLng:l},function(c){c!==null?(e=d=c.address,D=g.lat=t.coords.latitude,w=g.lng=t.coords.longitude,g.origin=e,g.distance=i,s.mapping(g),typeof e!="undefined"&&n("#"+s.settings.addressID).val(e)):s.notify(s.settings.addressErrorAlert)})},_autoGeocodeError:function(){this.writeDebug("_autoGeocodeError"),this.notify(this.settings.autoGeocodeErrorAlert)},defaultLocation:function(){this.writeDebug("defaultLocation");var t=this,s=null,i=n("#"+this.settings.maxDistanceID),a;this.settings.querystringParams===!0?this.getQueryString(this.settings.maxDistanceID)?(s=this.getQueryString(this.settings.maxDistanceID),i.val()!==""&&(s=i.val())):this.settings.maxDistance===!0&&(s=i.val()||""):this.settings.maxDistance===!0&&(s=i.val()||"");var e=new this.reverseGoogleGeocode(this),r=new google.maps.LatLng(this.settings.defaultLat,this.settings.defaultLng);e.geocode({latLng:r},function(l){l!==null?(a=d=l.address,D=g.lat=t.settings.defaultLat,w=g.lng=t.settings.defaultLng,g.distance=s,g.origin=a,t.mapping(g)):t.notify(t.settings.addressErrorAlert)})},paginationChange:function(t){this.writeDebug("paginationChange",arguments),this.settings.callbackPageChange&&this.settings.callbackPageChange.call(this,t),g.page=t,this.mapping(g)},getAddressByMarker:function(t){this.writeDebug("getAddressByMarker",arguments);var s="";return o[t].address&&(s+=o[t].address+" "),o[t].address2&&(s+=o[t].address2+" "),o[t].city&&(s+=o[t].city+", "),o[t].state&&(s+=o[t].state+" "),o[t].postal&&(s+=o[t].postal+" "),o[t].country&&(s+=o[t].country+" "),s},clearMarkers:function(){this.writeDebug("clearMarkers");var t=null;o.length<this.settings.storeLimit?t=o.length:t=this.settings.storeLimit;for(var s=0;s<t;s++)S[s].setMap(null)},directionsRequest:function(t,s,i){this.writeDebug("directionsRequest",arguments),this.settings.callbackDirectionsRequest&&this.settings.callbackDirectionsRequest.call(this,t,s,i,o[s]);var a=this.getAddressByMarker(s);if(a){n("."+this.settings.locationList+" ul").hide(),this.clearMarkers(),T!==null&&typeof T!="undefined"&&(T.setMap(null),T=null),T=new google.maps.DirectionsRenderer,ft=new google.maps.DirectionsService,T.setMap(i),T.setPanel(n(".bh-sl-directions-panel").get(0));var e={origin:t,destination:a,travelMode:google.maps.TravelMode.DRIVING};ft.route(e,function(r,l){l===google.maps.DirectionsStatus.OK&&T.setDirections(r)}),n("."+this.settings.locationList).prepend('<div class="bh-sl-close-directions-container"><div class="'+this.settings.closeIcon+'"></div></div>')}n(m).off("click","."+this.settings.locationList+" li .loc-directions a")},closeDirections:function(){this.writeDebug("closeDirections"),this.settings.callbackCloseDirections&&this.settings.callbackCloseDirections.call(this),this.reset(),D&&w&&(this.countFilters()===0?this.settings.mapSettings.zoom=_:this.settings.mapSettings.zoom=0,this.processForm(null)),n(m).off("click."+h,"."+this.settings.locationList+" .bh-sl-close-icon")},lengthUnitSwap:function(t){this.writeDebug("lengthUnitSwap",arguments),t.val()==="alt-distance"?(n("."+this.settings.locationList+" .loc-alt-dist").show(),n("."+this.settings.locationList+" .loc-default-dist").hide()):t.val()==="default-distance"&&(n("."+this.settings.locationList+" .loc-default-dist").show(),n("."+this.settings.locationList+" .loc-alt-dist").hide())},processForm:function(t){this.writeDebug("processForm",arguments);var s=this,i=null,a={},e=n("#"+this.settings.addressID),r=n("#"+this.settings.searchID),l=n("#"+this.settings.maxDistanceID),c="";if(typeof t!="undefined"&&t!==null&&t.preventDefault(),n("."+s.settings.formContainer+" input, ."+s.settings.formContainer+" select").blur(),this.settings.querystringParams===!0?this.getQueryString(this.settings.addressID)||this.getQueryString(this.settings.searchID)||this.getQueryString(this.settings.maxDistanceID)?(d=this.getQueryString(this.settings.addressID),p=this.getQueryString(this.settings.searchID),i=this.getQueryString(this.settings.maxDistanceID),e.val()!==""&&(d=e.val()),r.val()!==""&&(p=r.val()),l.val()!==""&&(i=l.val())):(d=e.val()||"",p=r.val()||"",this.settings.maxDistance===!0&&(i=l.val()||"")):(d=e.val()||"",p=r.val()||"",this.settings.maxDistance===!0&&(i=l.val()||"")),this.settings.callbackRegion?c=this.settings.callbackRegion.call(this,d,p,i):c=n("#"+this.settings.regionID).val(),this.settings.callbackFormVals&&this.settings.callbackFormVals.call(this,d,p,i,c),typeof c!="undefined"&&(a={country:c}),typeof this.settings.callbackGeocodeRestrictions=="function"&&(a=this.settings.callbackGeocodeRestrictions.call(this,d,p,i)),d===""&&p===""&&this.settings.autoGeocode!==!0)this._start();else if(d!=="")if(p===""&&u.hasOwnProperty("name")&&delete u.name,typeof x!="undefined"&&typeof D!="undefined"&&typeof w!="undefined"&&d===x)g.lat=D,g.lng=w,g.origin=d,g.name=p,g.distance=i,s.mapping(g);else{var f=new this.googleGeocode(this);f.geocode({address:d,componentRestrictions:a,region:c},function(v){v!==null?(D=v.latitude,w=v.longitude,g.lat=D,g.lng=w,g.origin=d,g.name=p,g.distance=i,g.geocodeResult=v.geocodeResult,s.mapping(g)):s.notify(s.settings.addressErrorAlert)})}else p!==""?(d===""&&delete g.origin,g.name=p,s.mapping(g)):this.settings.autoGeocode===!0&&(g.lat=D,g.lng=w,g.origin=d,g.name=p,g.distance=i,s.mapping(g))},locationsSetup:function(t,s,i,a,e){if(this.writeDebug("locationsSetup",arguments),typeof a!="undefined"&&(t.distance||(t.distance=this.geoCodeCalcCalcDistance(s,i,t.lat,t.lng,at.EarthRadius),this.settings.lengthUnit==="m"?t.altdistance=parseFloat(t.distance)*1.609344:this.settings.lengthUnit==="km"&&(t.altdistance=parseFloat(t.distance)/1.609344))),!this.coordinatesInRange(t.lat,t.lng)){this.writeDebug("locationsSetup","location ignored because coordinates out of range: "+e,t);return}if(this.settings.maxDistance===!0&&typeof e!="undefined"&&e!==null)if(t.distance<=e)o.push(t);else{this.writeDebug("locationsSetup","location ignored because it is out of maxDistance: "+e,t);return}else if(this.settings.maxDistance===!0&&this.settings.querystringParams===!0&&typeof e!="undefined"&&e!==null)if(t.distance<=e)o.push(t);else{this.writeDebug("locationsSetup","location ignored because it is out of maxDistance: "+e,t);return}else o.push(t)},sorting:function(){this.writeDebug("sorting",arguments);var t=this,s=n("#"+t.settings.mapID),i=n("#"+t.settings.sortID);i.length!==0&&i.on("change."+h,function(a){a.stopPropagation(),t.settings.pagination===!0&&t.paginationChange(0);var e,r;e=typeof n(this).find(":selected").attr("data-method")!="undefined"?n(this).find(":selected").attr("data-method"):"distance",r=n(this).val(),t.settings.sortBy.method=e,t.settings.sortBy.prop=r,t.settings.callbackSorting&&t.settings.callbackSorting.call(this,t.settings.sortBy),s.hasClass("bh-sl-map-open")&&t.mapping(g)})},order:function(){this.writeDebug("order",arguments);var t=this,s=n("#"+t.settings.mapID),i=n("#"+t.settings.orderID);i.length!==0&&i.on("change."+h,function(a){a.stopPropagation(),t.settings.pagination===!0&&t.paginationChange(0),t.settings.sortBy.order=n(this).val(),t.settings.callbackOrder&&t.settings.callbackOrder.call(this,t.settings.order),s.hasClass("bh-sl-map-open")&&t.mapping(g)})},countFilters:function(){this.writeDebug("countFilters");var t=0;if(!this.isEmptyObject(u))for(var s in u)u.hasOwnProperty(s)&&(t+=u[s].length);return t},_existingCheckedFilters:function(t){this.writeDebug("_existingCheckedFilters",arguments),n("#"+this.settings.taxonomyFilters[t]+" input[type=checkbox]").each(function(){if(n(this).prop("checked")){var s=n(this).val();typeof s!="undefined"&&s!==""&&u[t].indexOf(s)===-1&&u[t].push(s)}})},_existingSelectedFilters:function(t){this.writeDebug("_existingSelectedFilters",arguments),n("#"+this.settings.taxonomyFilters[t]+" select").each(function(){var s=n(this).val();typeof s!="undefined"&&s!==""&&u[t].indexOf(s)===-1&&(u[t]=[s])})},_existingRadioFilters:function(t){this.writeDebug("_existingRadioFilters",arguments),n("#"+this.settings.taxonomyFilters[t]+" input[type=radio]").each(function(){if(n(this).prop("checked")){var s=n(this).val();typeof s!="undefined"&&s!==""&&u[t].indexOf(s)===-1&&(u[t]=[s])}})},checkFilters:function(){this.writeDebug("checkFilters");for(var t in this.settings.taxonomyFilters)this.settings.taxonomyFilters.hasOwnProperty(t)&&(this._existingCheckedFilters(t),this._existingSelectedFilters(t),this._existingRadioFilters(t))},selectQueryStringFilters:function(t,s){this.writeDebug("selectQueryStringFilters",arguments);var i=n("#"+this.settings.taxonomyFilters[t]);if(i.find('input[type="checkbox"]').length)for(var a=0;a<s.length;a++)i.find('input:checkbox[value="'+s[a]+'"]').prop("checked",!0);i.find("select").length&&i.find('option[value="'+s[0]+'"]').prop("selected",!0),i.find('input[type="radio"]').length&&i.find('input:radio[value="'+s[0]+'"]').prop("checked",!0)},checkQueryStringFilters:function(){this.writeDebug("checkQueryStringFilters",arguments);for(var t in u)if(u.hasOwnProperty(t)){var s=this.getQueryString(t);s.indexOf(",")!==-1&&(s=s.split(",")),typeof s!="undefined"&&s!==""&&u[t].indexOf(s)===-1&&(Array.isArray(s)?u[t]=s:u[t]=[s]),u[t].length&&this.selectQueryStringFilters(t,u[t])}},getFilterKey:function(t){this.writeDebug("getFilterKey",arguments);for(var s in this.settings.taxonomyFilters)if(this.settings.taxonomyFilters.hasOwnProperty(s)){for(var i=0;i<this.settings.taxonomyFilters[s].length;i++)if(this.settings.taxonomyFilters[s]===t)return s}},taxonomyFiltersInit:function(){this.writeDebug("taxonomyFiltersInit");for(var t in this.settings.taxonomyFilters)this.settings.taxonomyFilters.hasOwnProperty(t)&&(u[t]=[])},taxonomyFiltering:function(){this.writeDebug("taxonomyFiltering");var t=this;t.taxonomyFiltersInit(),t.checkQueryStringFilters(),n("."+this.settings.taxonomyFiltersContainer).on("change."+h,"input, select",function(s){s.stopPropagation();var i,a,e;if(t.settings.pagination===!0&&t.paginationChange(0),n(this).is('input[type="checkbox"]')){if(t.checkFilters(),i=n(this).val(),a=n(this).closest(".bh-sl-filters").attr("id"),e=t.getFilterKey(a),e)if(n(this).prop("checked"))u[e].indexOf(i)===-1&&u[e].push(i),n("#"+t.settings.mapID).hasClass("bh-sl-map-open")===!0&&(D&&w?(t.settings.mapSettings.zoom=0,t.processForm()):t.mapping(g));else{var r=u[e].indexOf(i);r>-1&&(u[e].splice(r,1),n("#"+t.settings.mapID).hasClass("bh-sl-map-open")===!0&&(D&&w?(t.countFilters()===0?t.settings.mapSettings.zoom=_:t.settings.mapSettings.zoom=0,t.processForm()):t.mapping(g)))}}else(n(this).is("select")||n(this).is('input[type="radio"]'))&&(t.checkFilters(),i=n(this).val(),a=n(this).closest(".bh-sl-filters").attr("id"),e=t.getFilterKey(a),i?e&&(u[e]=[i],n("#"+t.settings.mapID).hasClass("bh-sl-map-open")===!0&&(D&&w?(t.settings.mapSettings.zoom=0,t.processForm()):t.mapping(g))):(e&&(u[e]=[]),t.reset(),D&&w?(t.settings.mapSettings.zoom=_,t.processForm()):t.mapping(g)))})},checkVisibleMarkers:function(t,s){this.writeDebug("checkVisibleMarkers",arguments);var i=this,a,e;n("."+this.settings.locationList+" ul").empty(),n(t).each(function(r,l){s.getBounds().contains(l.getPosition())&&(i.listSetup(l,0,0),e=z(a),n("."+i.settings.locationList+" > ul").append(e))}),n("."+this.settings.locationList+" ul li:even").css("background",this.settings.listColor1),n("."+this.settings.locationList+" ul li:odd").css("background",this.settings.listColor2)},dragSearch:function(t){this.writeDebug("dragSearch",arguments);var s=t.getCenter(),i,a=this;this.settings.mapSettings.zoom=t.getZoom(),D=g.lat=s.lat(),w=g.lng=s.lng();var e=new this.reverseGoogleGeocode(this);i=new google.maps.LatLng(g.lat,g.lng),e.geocode({latLng:i},function(r){r!==null?(g.origin=d=r.address,a.mapping(g)):a.notify(a.settings.addressErrorAlert)})},emptyResult:function(){this.writeDebug("emptyResult",arguments);var t,s=n("."+this.settings.locationList+" ul"),i=this.settings.mapSettings,a;this.map=new google.maps.Map(m.getElementById(this.settings.mapID),i),this.settings.callbackNoResults&&this.settings.callbackNoResults.call(this,this.map,i),s.empty(),a=n('<li><div class="bh-sl-noresults-title">'+this.settings.noResultsTitle+'</div><br><div class="bh-sl-noresults-desc">'+this.settings.noResultsDesc+"</li>").hide().fadeIn(),s.append(a),D&&w?t=new google.maps.LatLng(D,w):t=new google.maps.LatLng(0,0),this.map.setCenter(t),_&&this.map.setZoom(_)},originMarker:function(t,s,i){if(this.writeDebug("originMarker",arguments),this.settings.originMarker===!0){var a,e="";typeof s!="undefined"&&(this.settings.originMarkerImg!==null?this.settings.originMarkerDim===null?e=this.markerImage(this.settings.originMarkerImg):e=this.markerImage(this.settings.originMarkerImg,this.settings.originMarkerDim.width,this.settings.originMarkerDim.height):e={url:"https://mt.googleapis.com/vt/icon/name=icons/spotlight/spotlight-waypoint-a.png"},a=new google.maps.Marker({position:i,map:t,icon:e,draggable:!1}))}},modalWindow:function(){if(this.writeDebug("modalWindow"),this.settings.modal===!0){var t=this;t.settings.callbackModalOpen&&t.settings.callbackModalOpen.call(this),n("."+t.settings.overlay).fadeIn(),n(m).on("click."+h,"."+t.settings.closeIcon+", ."+t.settings.overlay,function(){t.modalClose()}),n(m).on("click."+h,"."+t.settings.modalWindow,function(s){s.stopPropagation()}),n(m).on("keyup."+h,function(s){s.keyCode===27&&t.modalClose()})}},openNearestLocation:function(t,s,i,a){if(this.writeDebug("openNearestLocation",arguments),!(this.settings.openNearest!==!0||typeof t=="undefined"||typeof x=="undefined"||this.settings.fullMapStart===!0&&L===!0&&this.settings.querystringParams===!1||this.settings.defaultLoc===!0&&L===!0&&this.settings.querystringParams===!1)){var e=this;e.settings.callbackNearestLoc&&e.settings.callbackNearestLoc.call(this,e.map,t,s,i,a);var r=t.hasOwnProperty("markerid")?t.markerid:0,l=S[r];e.createInfowindow(l,"left",s,i,a);var c=n("."+e.settings.locationList),f=n("."+e.settings.locationList+" li[data-markerid="+r+"]");n("."+e.settings.locationList+" li").removeClass("list-focus"),f.addClass("list-focus"),c.animate({scrollTop:f.offset().top-c.offset().top+c.scrollTop()})}},listClick:function(t,s,i,a){this.writeDebug("listClick",arguments);var e=this;n(m).on("click."+h,"."+e.settings.locationList+" li",function(){var r=n(this).data("markerid"),l=S[r];e.settings.callbackListClick&&e.settings.callbackListClick.call(this,r,l,o[r],t),t.panTo(l.getPosition());var c="left";e.createInfowindow(l,c,s,i,a),e.settings.selectedMarkerImg!==null&&e.changeSelectedMarker(l),n("."+e.settings.locationList+" li").removeClass("list-focus"),n("."+e.settings.locationList+" li[data-markerid="+r+"]").addClass("list-focus")}),n(m).on("click."+h,"."+e.settings.locationList+" li a",function(r){r.stopPropagation()})},resultsTotalCount:function(t){this.writeDebug("resultsTotalCount",arguments);var s=n(".bh-sl-total-results");typeof t=="undefined"||t<=0||s.length===0||s.text(t)},inlineDirections:function(t,s){if(this.writeDebug("inlineDirections",arguments),!(this.settings.inlineDirections!==!0||typeof s=="undefined")){var i=this;n(m).on("click."+h,"."+i.settings.locationList+" li .loc-directions a",function(a){a.preventDefault();var e=n(this).closest("li").attr("data-markerid");i.directionsRequest(s,parseInt(e),t),n(m).on("click."+h,"."+i.settings.locationList+" .bh-sl-close-icon",function(){i.closeDirections()})})}},visibleMarkersList:function(t,s){if(this.writeDebug("visibleMarkersList",arguments),this.settings.visibleMarkersList===!0){var i=this;google.maps.event.addListenerOnce(t,"idle",function(){i.checkVisibleMarkers(s,t)}),google.maps.event.addListener(t,"center_changed",function(){i.checkVisibleMarkers(s,t)}),google.maps.event.addListener(t,"zoom_changed",function(){i.checkVisibleMarkers(s,t)})}},featuredDistanceRestriction:function(){this.writeDebug("featuredDistanceRestriction",arguments);var t=this;return F=n.grep(F,function(s){if(s.hasOwnProperty("distance"))return parseFloat(s.distance)<=parseFloat(t.settings.featuredDistance)}),F},featuredRestrictions:function(t){return this.writeDebug("featuredRestrictions",arguments),this.settings.featuredDistance===null||this.settings.featuredDistance!==null&&(F=this.featuredDistanceRestriction(t)),F},mapping:function(t){this.writeDebug("mapping",arguments);var s=this,i,a,e,r,l,c;this.isEmptyObject(t)||(i=t.lat,a=t.lng,e=t.geocodeResult,r=t.origin,c=t.page),s.settings.pagination===!0&&(typeof c=="undefined"||x!==d)&&(c=0),typeof r=="undefined"&&this.settings.nameSearch===!0?N=s._getData():(l=new google.maps.LatLng(i,a),typeof x!="undefined"&&r===x&&typeof st!="undefined"?(r=x,N=st):N=s._getData(D,w,r,e,t)),s.settings.taxonomyFilters!==null&&s.hasEmptyObjectVals(u)&&s.checkFilters(),s.settings.dataRaw!==null?s.processData(t,l,N,c):N.done(function(f){s.processData(t,l,f,c)})},resetDisabledFilterVals:function(){this.writeDebug("resetDisabledFilterVals");for(var t in this.settings.taxonomyFilters)if(this.settings.taxonomyFilters.hasOwnProperty(t))for(var s=0;s<this.settings.taxonomyFilters[t].length;s++)n("#"+this.settings.taxonomyFilters[t]+" input,option").each(function(){var i=n(this).attr("disabled");typeof i!="undefined"&&n(this).removeAttr("disabled")})},getAvailableFilters:function(t){this.writeDebug("getAvailableFilters");var s=[];for(var i in o)if(o.hasOwnProperty(i)){for(var a in o[i])if(u.hasOwnProperty(a)&&o[i][a]!=="")if(s.hasOwnProperty(a)){var e=s[a].concat(",",o[i][a].replace(", ",",").trim());s[a]=Array.from(new Set(e.split(","))).toString()}else s[a]=o[i][a].replace(", ",",").trim()}for(var r in u)s.hasOwnProperty(r)||(s[r]="");t(s)},maybeDisableFilterOptions:function(){this.writeDebug("maybeDisableFilterOptions");var t=[],s=this;this.resetDisabledFilterVals(),this.getAvailableFilters(function(i){t=i,typeof K=="undefined"&&(K=t);for(var a in s.settings.taxonomyFilters)if(s.settings.taxonomyFilters.hasOwnProperty(a))for(var e=0;e<s.settings.taxonomyFilters[a].length;e++)s.settings.taxonomyFilters.hasOwnProperty(a)&&n("#"+s.settings.taxonomyFilters[a]+" input, #"+s.settings.taxonomyFilters[a]+" option").each(function(){if(n(this).val()!==""&&Array.from(new Set(t[a].split(","))).indexOf(n(this).val())===-1){if((typeof d=="undefined"||d==="")&&(n(this).prop("tagName")==="OPTION"||n(this).prop("type")==="radio")&&s.hasSingleGroupFilterVal(u,a)||(typeof d!="undefined"||d!=="")&&(n(this).prop("tagName")==="OPTION"||n(this).prop("type")==="radio")&&s.hasSingleGroupFilterVal(u,a)&&Array.from(new Set(K[a].split(","))).indexOf(n(this).val())!==-1)return;n(this).attr("disabled",!0)}})})},processData:function(t,s,i,a){this.writeDebug("processData",arguments);var e=this,r=0,l,c,f,v,b,G,ot,I,E,Q,Y,$,V,H,R={},tt=n("#"+e.settings.lengthSwapID);this.isEmptyObject(t)||(l=t.lat,c=t.lng,f=t.origin,v=t.name,b=t.distance);var mt=n("#"+e.settings.mapID),vt=e.settings.lengthUnit==="km"?e.settings.kilometersLang:e.settings.milesLang;if(st=N,typeof f!="undefined"&&(x=f),e.settings.callbackSuccess&&e.settings.callbackSuccess.call(this,t,s,i,a),$=mt.hasClass("bh-sl-map-open"),e.settings.fullMapStart===!0&&$===!1||e.settings.autoGeocode===!0&&$===!1||e.settings.defaultLoc===!0&&$===!1?L=!0:(e.settings.fullMapStart===!0&&Z===!0||e.settings.autoGeocode===!0&&Z===!0||e.settings.defaultLoc,e.reset()),mt.addClass("bh-sl-map-open"),e.settings.dataType==="json"||e.settings.dataType==="jsonp")for(var bt=0;r<i.length;bt++){var lt=i[bt],yt={};for(var gt in lt)lt.hasOwnProperty(gt)&&(yt[gt]=lt[gt]);e.locationsSetup(yt,l,c,f,b),r++}else e.settings.dataType==="kml"?n(i).find("Placemark").each(function(){var y={name:n(this).find("name").text(),lat:n(this).find("coordinates").text().split(",")[1],lng:n(this).find("coordinates").text().split(",")[0],description:n(this).find("description").text()};e.locationsSetup(y,l,c,f,b),r++}):n(i).find(e.settings.xmlElement).each(function(){var y={};for(var W in this.attributes)this.attributes.hasOwnProperty(W)&&(y[this.attributes[W].name]=this.attributes[W].value);e.locationsSetup(y,l,c,f,b),r++});if(e.settings.nameSearch===!0){if(typeof p!="undefined"&&p!=="")if(e.settings.nameAttribute.indexOf(",")){M=e.settings.nameAttribute.split(","),e.settings.exclusiveTax!==null?e.settings.exclusiveTax.concat(M):e.settings.exclusiveTax=M;for(var ut=0;ut<M.length;ut++)u[M[ut].trim()]=[p]}else u[e.settings.nameAttribute]=[p];if(typeof p!="undefined"&&p==="")if(typeof M!="undefined")for(var et=0;et<M.length;et++)M[et]in u&&delete u[M[et]];else delete u[e.settings.nameAttribute]}if(e.settings.taxonomyFilters!==null||e.settings.nameSearch===!0){for(var k in u)if(u.hasOwnProperty(k)&&u[k].length>0)for(var P=0;P<u[k].length;P++)R[k]||(R[k]=[]),typeof M!="undefined"?M.indexOf(k)!==-1?R[k][P]="(?:^|\\s)"+u[k][P].replace(/([.*+?^=!:${}()|\[\]\/\\]|&\s+)/g,""):R[k][P]="(?=.*"+u[k][P].replace(/([.*+?^=!:${}()|\[\]\/\\]|&\s+)/g,"")+"(?!\\s))":k===e.settings.nameAttribute?R[k][P]="(?:^|\\s)"+u[k][P].replace(/([.*+?^=!:${}()|\[\]\/\\]|&\s+)/g,""):R[k][P]="(?=.*"+u[k][P].replace(/([.*+?^=!:${}()|\[\]\/\\]|&\s+)/g,"")+"(?!\\s))";e.isEmptyObject(R)||(o=n.grep(o,function(y){return e.filterData(y,R)}))}if(e.settings.sortBy!==null&&typeof e.settings.sortBy=="object")e.settings.openNearest===!0&&typeof x!="undefined"&&(this.sortNumerically(o,!0),typeof o[0]!="undefined"&&(this.settings.sortBy.hasOwnProperty("order")&&this.settings.sortBy.order.toString()==="desc"?H=o[o.length-1]:H=o[0])),e.sortCustom(o);else{if(typeof f!="undefined"&&e.sortNumerically(o),e.isEmptyObject(R))if(e.settings.maxDistance===!0&&b)(typeof o[0]=="undefined"||o[0].distance>b)&&e.notify(e.settings.distanceErrorAlert+b+" "+vt);else if(typeof o[0]!="undefined")e.settings.distanceAlert!==-1&&o[0].distance>e.settings.distanceAlert&&(e.notify(e.settings.distanceErrorAlert+e.settings.distanceAlert+" "+vt),Y=!0);else{throw e.emptyResult(),new Error("No locations found. Please check the dataLocation setting and path.");return}typeof o[0]!="undefined"&&(H=o[0])}if(e.settings.featuredLocations===!0&&(F=n.grep(o,function(y){if(y.hasOwnProperty("featured"))return y.featured==="true"}),F=e.featuredRestrictions(t),nt=n.grep(o,function(y){if(y.hasOwnProperty("featured"))return y.featured!=="true"}),o=[],o=F.concat(nt)),L!==!0&&this.settings.taxonomyFilters!==null&&this.settings.exclusiveFiltering===!1&&e.maybeDisableFilterOptions(),e.settings.slideMap===!0&&O.slideDown(),e.settings.pagination===!0&&e.paginationSetup(a),e.settings.altDistanceNoResult===!0&&H.distance>e.settings.distanceAlert){e.emptyResult();return}if(e.isEmptyObject(o)||o[0].result==="none"){e.emptyResult();return}if(e.modalWindow(),e.settings.storeLimit===-1||o.length<e.settings.storeLimit||this.settings.fullMapStart===!0&&L===!0&&(!isNaN(this.settings.fullMapStartListLimit)||this.settings.fullMapStartListLimit>26||this.settings.fullMapStartListLimit===-1)?U=o.length:U=e.settings.storeLimit,e.settings.fullMapStart===!0&&e.isEmptyObject(R)&&(p===""||typeof p=="undefined")&&(d===""||typeof d=="undefined")&&(U=o.length),e.settings.pagination===!0?(E=e.settings.locationsPerPage,I=a*e.settings.locationsPerPage,I+E>o.length&&(E=e.settings.locationsPerPage-(I+E-o.length)),o=o.slice(I,I+E),U=o.length):(E=U,I=0),e.resultsTotalCount(o.length),e.settings.fullMapStart===!0&&L===!0&&e.settings.querystringParams!==!0||e.settings.mapSettings.zoom===0||typeof f=="undefined"||Y===!0||e.settings.maxDistance===!0&&L===!1&&this.countFilters()>0)Q=e.settings.mapSettings,ot=new google.maps.LatLngBounds;else if(e.settings.pagination===!0){var St=new google.maps.LatLng(o[0].lat,o[0].lng);a===0?(e.settings.mapSettings.center=s,Q=e.settings.mapSettings):(e.settings.mapSettings.center=St,Q=e.settings.mapSettings)}else e.settings.mapSettings.center=s,Q=e.settings.mapSettings;if(e.map=new google.maps.Map(m.getElementById(e.settings.mapID),Q),A.addEventListener("resize",function(){var y=e.map.getCenter();google.maps.event.trigger(e.map,"resize"),e.map.setCenter(y)}),e.settings.dragSearch===!0&&e.map.addListener("dragend",function(){e.dragSearch(e.map)}),O.data(e.settings.mapID.replace("#",""),e.map),e.settings.callbackMapSet&&e.settings.callbackMapSet.call(this,e.map,s,_,Q),typeof InfoBubble!="undefined"&&e.settings.infoBubble!==null){var Dt=e.settings.infoBubble;Dt.map=e.map,V=new InfoBubble(Dt)}else V=new google.maps.InfoWindow;e.originMarker(e.map,f,s),n(m).on("click."+h,".bh-sl-pagination li",function(y){y.preventDefault(),e.paginationChange(n(this).attr("data-page"))}),e.inlineDirections(e.map,f);for(var C=0;C<=E-1;C++){var ct="";a>0?ct=String.fromCharCode("A".charCodeAt(0)+(I+C)):ct=String.fromCharCode("A".charCodeAt(0)+C);var wt=new google.maps.LatLng(o[C].lat,o[C].lng);if(G=e.createMarker(wt,o[C].name,o[C].address,ct,e.map,o[C].category),G.set("id",C),S[C]=G,o[C].markerid=G.get("id"),this.settings.dataRaw!==null)for(var q=0;q<this.settings.dataRaw.length;q++)this.settings.dataRaw[q]&&this.settings.dataRaw[q].hasOwnProperty("id")&&this.settings.dataRaw[q].id===o[C].id&&(this.settings.dataRaw[q].markerid=o[C].markerid);(e.settings.fullMapStart===!0&&L===!0&&e.settings.querystringParams!==!0||e.settings.mapSettings.zoom===0||typeof f=="undefined"||Y===!0||e.settings.maxDistance===!0&&L===!1&&this.countFilters()>0)&&ot.extend(wt),e.createInfowindow(G,null,V,I,a)}if(e.settings.fullMapStart===!0&&L===!0&&e.settings.querystringParams!==!0||e.settings.mapSettings.zoom===0||typeof f=="undefined"||Y===!0||e.settings.maxDistance===!0&&L===!1&&this.countFilters()>0){e.map.fitBounds(ot);var Ct=google.maps.event.addListener(e.map,"idle",function(){e.map.getZoom()>16&&e.map.setZoom(16),google.maps.event.removeListener(Ct)})}var Mt=n("."+e.settings.locationList+" ul");if(Mt.empty(),L&&e.settings.fullMapStartListLimit!==!1&&!isNaN(e.settings.fullMapStartListLimit)&&e.settings.fullMapStartListLimit!==-1&&S.length>e.settings.fullMapStartListLimit)for(var ht=0;ht<e.settings.fullMapStartListLimit;ht++){var It=S[ht];e.listSetup(It,I,a)}else n(S).each(function(y){var W=S[y];e.listSetup(W,I,a)});if(tt.length&&(e.lengthUnitSwap(tt),tt.on("change."+h,function(y){y.stopPropagation(),e.lengthUnitSwap(tt)})),e.openNearestLocation(H,V,I,a),typeof MarkerClusterer!="undefined"&&e.settings.markerCluster!==null)var Ft=new MarkerClusterer(e.map,S,e.settings.markerCluster);if(e.listClick(e.map,V,I,a),n("."+e.settings.locationList+" ul > li:even").css("background",e.settings.listColor1),n("."+e.settings.locationList+" ul > li:odd").css("background",e.settings.listColor2),e.visibleMarkersList(e.map,S),e.settings.querystringParams===!0){var Lt=n("#"+e.settings.addressID),kt=n("#"+e.settings.searchID);typeof g!="undefined"&&g.hasOwnProperty("origin")&&Lt.val()===""&&Lt.val(g.origin),typeof g!="undefined"&&g.hasOwnProperty("name")&&kt.val()===""&&kt.val(g.name)}e.settings.modal===!0&&e.settings.callbackModalReady&&e.settings.callbackModalReady.call(this,t),e.settings.callbackFilters&&e.settings.callbackFilters.call(this,u,t)},writeDebug:function(){A.console&&this.settings.debug&&(Function.prototype.bind?this.writeDebug=Function.prototype.bind.call(console.log,console,"StoreLocator :"):this.writeDebug=function(){arguments[0]="StoreLocator : "+arguments[0],Function.prototype.apply.call(console.log,console,arguments)},this.writeDebug.apply(this,arguments))}}),n.fn[h]=function(t){var s=arguments;if(t===B||typeof t=="object")return this.each(function(){n.data(this,"plugin_"+h)||n.data(this,"plugin_"+h,new rt(this,t))});if(typeof t=="string"&&t[0]!=="_"&&t!=="init"){var i;return this.each(function(){var a=n.data(this,"plugin_"+h);a instanceof rt&&typeof a[t]=="function"&&(i=a[t].apply(a,Array.prototype.slice.call(s,1))),t==="destroy"&&n.data(this,"plugin_"+h,null)}),i!==B?i:this}}})(jQuery,window,document);})();
/*! jQuery Google Maps Store Locator - v3.1.12 - 2023-06-19
 * http://www.bjornblog.com/web/jquery-store-locator-plugin
 * Copyright (c) 2023 Bjorn Holine; Licensed MIT */
//# sourceMappingURL=storelocator.min.js.map
